
# Сборка и деплой (env: v=0)
> Создать папку `deploy/v0` если ее нет
> Создать папку `logs/migration` если ее нет

> Далее работа с core смарт-контрактами

1. `yarn v0-build` (Запустит build обеих версий:  manager/reserve)
2. `yarn v0-deploy` (Деплой контрактов версии 0)
    - `yarn v0-deploy-reserve`
    - `yarn v0-deploy-manager`
    - `yarn v0-deploy-new-manager`
3. `yarn deploy-upgraded-contracts` (Деплой версии 1)

    - Проверить выполнение: в папке вида `deploy/v/{contract_name}.address` должны лежать все адреса контрактов

4. 
    - `yarn v0-set-deps`: имея адреса контрактов: usdTon, manager, poolContract
    - `yarn v0-set-settings` передача настроек пула в менеджер
    - пополнение пула для активации jetton wallet каждой из монет
      тк монеты у нас тестовые и у них одинаковый интерфейс достаточно сделать это с одной монетой, это монета под индексом 0 из массива assets. Со своего адреса нужно через тонкипер перевести на адрес пула 1 монету st, скопировать кошелек-получатель из ветки транзакции и вставить в объект assets[0] в поле poolWallet, затем адрес кошелька отправителя вставить в переменную jettonUserWallet, после этих настроек можно запускать следующий скрипт:
    - `yarn v0-set-assets` (Установка кошельков пула и шаблона балансов)



# Получение информации (env: v=0/v=1)
> `yarn info_system` (Получение информации о системе) -
> `yarn info-user` (Получение информации о позиции пользователя) - если миграции не было - о старой, если была - о новой. 

# User flow (env: v=0/v=1)
  - для проверки jetton используем assets[0], для проверки ton - assets[3], индекс хранится в переменных assetIndex 
1. `yarn v0-supply` Внесение обеспечения
2. `yarn v0-withdraw` Возврат обеспечения пользователю

# Миграция (env: v=0)
> в env меняем версию на 1, запускаем команды из пункта 4(Сборка и деплой), для запуска миграции меняем версию на v0
 - `yarn v0-migration` Запуск миграции от владельца контракта  менеджер
 - `yarn v0-migration-pool` Запуск миграции от владельца контракта  пула
 - `v0-delete-manager` (опционально) После успешной миграции удаляем старый контракт менеджера