
# Сборка и деплой
> Создать папку `deploy/v0` если ее нет
> Создать папку `logs/migration` если ее нет

> Далее работа с core смарт-контрактами

1. `yarn v0-build` (Запустит build:  manager, newManager, reserve)
2. `yarn v0-deploy` (Деплой контрактов + установка зависимостей между контрактами)
    - `yarn v0-deploy-reserve`
    - `yarn v0-deploy-manager`
    - `yarn v0-deploy-new-manager`

    - Проверить выполнение: в папке вида `deploy/v0/{contract_name}.address` должны лежать все адреса контрактов
    - newManager деплоится исключительно для проверки миграции, он и контракт new up упрощены по функционалу и не будут использоваться

4. `yarn v0-setup`
    - `yarn v0-set-deps`: имея адреса контрактов: usdTon, manager, poolContract
    - пополнение пула для активации jetton wallet каждой из монет
      тк монеты у нас тестовые и у них одинаковый интерфейс достаточно сделать это с одной монетой, это монета под индексом 0 из массива assets. Со своего адреса нужно через тонкипер перевести на адрес пула 1 монету st, скопировать кошелек-получатель из ветки транзакции и вставить в объект assets[0] в поле poolWallet, затем адрес кошелька отправителя вставить в переменную jettonUserWallet, после этих настроек можно запускать следующий скрипт:
    - `yarn v0-set-assets` (Установка кошельков пула и шаблона балансов)



# Получение информации
> `yarn info_system` (Получение информации о системе) -
> `yarn info_user` (Получение информации о позиции пользователя) - если миграции не было - о старой, если была - о новой. 

# User flow
  - для проверки jetton используем assets[0], для проверки ton - assets[3], индекс хранится в переменных assetIndex 
1. `yarn v0-supply` (Внесение обеспечения)
2. `yarn v0-withdraw` (Возврат обеспечения пользователю)

 <!-- - `yarn v0-migration` (Запуск миграции от владельца контракта  менеджер)
 - `v0-delete-manager` (После успешной миграции удаляем старый контракт менеджера) -->
